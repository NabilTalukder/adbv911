!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.authentication=n():e.authentication=n()}(window,(function(){return t={},e.m=n={131:function(e,n,t){var o;window,o=function(){return function(e){function n(n){for(var o,a,s=n[0],u=n[1],l=n[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(c&&c(n);f.length;)f.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],o=!0,s=1;s<t.length;s++){var u=t[s];0!==r[u]&&(o=!1)}o&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var o={},r={authentication:0},i=[];function a(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=o,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)a.d(t,o,function(n){return e[n]}.bind(null,o));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="",Object.defineProperty(a,"p",{get:function(){try{if("string"!=typeof streamFullStaticPath)throw new Error("WebpackRequireFrom: 'streamFullStaticPath' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return streamFullStaticPath}catch(e){return""}}});var s=window.webpackJsonp_name_=window.webpackJsonp_name_||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var c=u;return i.push(["./Authentication/authentication.ts","jumper.common"]),t()}({"./Authentication/authentication.ts":function(e,n,t){var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./node_modules/adal-angular/lib/adal.js"),i=t("./node_modules/@msstream/core/esm/index.js"),a=t("./app/vNextBridges/streamCoreInit.ts"),s=t("./app/utility/TelemetrySchemas/UserType.ts");function u(e,n,t,o){var r;t?m(f,t+": "+e):((r=authContext.getCachedUser())||(m(f,"Login user failed. Cannot find user info."),y()),l(r))}function l(e){var n=e.profile.oid;sessionInfo&&(sessionInfo.UserClaim={TenantId:e.profile.tid,UserInfo:{DisplayableId:e.userName,FamilyName:e.profile.family_name,GivenName:e.profile.given_name,UniqueId:n}});var t=i.StreamLoggingService.getStandardContextsDeepCopy(),r=n?function(){var e;return sessionInfo&&sessionInfo.PrincipalInfo&&(e=JSON.parse(sessionInfo.PrincipalInfo)),e&&e.permissions&&e.permissions.canManageRoleAssignments}()?s.UserType.Admin:s.UserType.Regular:s.UserType.Unauthenticated,a=o({},t.userContext,{userId:n,tenantId:e.profile.tid,userType:r}),u=portalConfiguration.ECSConfiguration&&portalConfiguration.ECSConfiguration.telemetryRecord?portalConfiguration.ECSConfiguration.telemetryRecord:{},l=o({},t.expContext,u);i.StreamLoggingService.userSignedIn&&i.StreamLoggingService.userSignedIn(a,l),sessionInfo.ApiGatewayVersion=portalConfiguration.TenantServiceApiVersion,g(f,{reason:"ADAL Sign in succeeded."}),"loading"!==document.readyState?w(y,y):document.addEventListener("DOMContentLoaded",(function(){w(y,y)}))}function c(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(n,t,o){return e[t]=o,n})),e}window.pollCachedUser=function(){var e=authContext.getCachedUser();return!!e&&(g(f,{reason:"Found cached user."}),l(e),!0)};var d,f="Adal_SignIn",p="Adal_AcquireToken";function g(e,n){var t=n||{};t.resultType="Success",t.alertStatus=1,h(e,t)}function m(e,n,t){var o=t||{};o.resultType="Failure",o.alertStatus=0,o.reason=n,h(e,o)}function h(e,n){n.buildNumber=portalConfiguration.BuildNumber,n.ringNumber=portalConfiguration.RingNumber,n.dataCenterCluster=portalConfiguration.ClusterName;var t=sessionInfo.UserClaim;n.tenantId=t?t.TenantId:"",n.userId=t&&t.UserInfo?t.UserInfo.UniqueId:"",n.userSessionId=sessionInfo.SessionId,n.clientSessionId=sessionInfo.ClientSessionId,n.servicePlan=sessionInfo.ServicePlanForTelemetry||"0",n.UserLanguage=sessionInfo.UserLanguage,n.userRegion=sessionInfo.UserRegion,n.serviceRegion=sessionInfo.ServiceRegion;var o={name:e,data:n};i&&i.StreamLoggingService?i.StreamLoggingService.legacy(o):console.log("logger is not defined. Stream is not logging anything!")}function w(e,n){authContext.acquireToken(portalConfiguration.AadResourceId,(function(t,o,r){var i,a;r?(m(p,r+": "+t),window.isEmbed?n(r):authContext.acquireTokenRedirect(portalConfiguration.AadResourceId,null,null)):(g(p),i=authContext._getItem(authContext.CONSTANTS.STORAGE.EXPIRATION_KEY+portalConfiguration.AadResourceId),a=new Date(1e3*i),sessionInfo.AccessToken=o,sessionInfo.AccessTokenExpiry=a.toISOString(),sessionInfo.IsSignedInWithAdal=!0,e())}))}function y(){angular.element(document).scope()?angular.element(document).scope().$apply():window.appInit&&window.appInit("embed")}window.acquireAccessToken=w,sessionInfo.UserClaim={TenantId:"",UserInfo:{DisplayableId:"",FamilyName:"",GivenName:"",UniqueId:""}},a.initalizeStreamCore(),!window.isUnsupportedBrowserErrorKillSwitchOn&&(d=navigator.userAgent.match(/Trident\/(\d+)/))&&parseInt(d[1],10)+4<11?(h("Browser_Unsupported",{}),document.getElementById("streamLoading").style.display="none",document.getElementById("browserError").style.display="block"):function(){if(portalConfiguration.EnableMockApiGateway)return h("Adal_Skipped",{reason:"Skipping Adal auth as mocks are on."}),y();var e,n=[],t=c().domain_hint,o=c().auth_upn;t&&n.push("domain_hint="+t),o&&n.push("login_hint="+o),window.adalConfig={instance:portalConfiguration.AadInstance,clientId:portalConfiguration.AadClientId,cacheLocation:"localStorage",popUp:function(){try{return window.top!=window.self}catch(e){return!0}}(),callback:u,redirectUri:(window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))+"/authredirect",expireOffsetSeconds:900,extraQueryParameter:n.join("&")},!sessionInfo.TenantedAuth||(e=c().tenantId)&&(window.adalConfig.tenant=e,window.resourceTenant=e);var i=new r(window.adalConfig);(window.authContext=i).isCallback(window.location.hash)&&i.handleWindowCallback();var a=i.getCachedUser();a&&function(e,n,t){if(sessionInfo.TenantedAuth){var o=c().tenantId;if(o&&e.profile.tid!==o)return!1}return!(n&&!e.userName.toLowerCase().endsWith(n.toLowerCase()))&&(!t||e.userName.toLowerCase()===t.toLowerCase())}(a,t,o)?(g(f,{reason:"Found cached user."}),l(a)):(i.clearCache(),sessionInfo.AccessToken=null,i._renewIdToken((function(e,n){e?(m(f,e),window.isEmbed?y():i.login()):(console.log("ADAL: silent login sucess"),g(f,{reason:"Silent sign in succeeded."}),l(i._createUser(n)))})))}()}})},e.exports=o()}},e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(o,r,function(e){return n[e]}.bind(null,r));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},e.p="",Object.defineProperty(e,"p",{get:function(){try{if("string"!=typeof streamFullStaticPath)throw new Error("WebpackRequireFrom: 'streamFullStaticPath' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return streamFullStaticPath}catch(e){return""}}}),e(e.s=131);function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n,t}));